<!doctype html>
<html lang="en">


<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="Forex position size calculator.">

    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, width=device-width, height=device-height, viewport-fit=cover">
    <meta name="description" content="Forex League App | Position Size Calculator"/>
    <meta name="robots" content="index, follow"/>
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"/>
    <link rel="canonical" href=""/><!--Add here the link from fxleague website-->

    <meta property="og:locale" content="en_US"/>
    <meta property="og:site_name" content="Forex League App"/>
    <meta property="og:url" content="https://www.finelinegames.xyz"/><!-- add link to this app here-->
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="Forex League App | Position Size Calculator."/>
    <meta property="og:image" content="Pictures/ForexLeaguecoloredBackground_Iphone7.jpg"/><!--fx league logo (WWW Link)-->
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta property="og:description" content="Use this app to improve your risk management."/>

    <meta property="article:modified_time" content="2021-07-01"/>

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="Pictures/ForexLeaguecoloredBackground_Iphone7.jpg"/><!--Link to picture-->
    <meta name="twitter:site" content=""/><!--Link to this app-->
    <meta name="twitter:title" content="Forex League App | Position Size Calculator"/>
    <meta name="twitter:description" content="Use this app to improve your risk management." />


    <!-- Progressive Web App Tag -->
    <link rel="manifest" href="/static/js/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
   <!-- <link rel="apple-touch-startup-image" href="/static/img/splash/launch-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/static/img/splash/launch-750x1294.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/static/img/splash/launch-1242x2148.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/static/img/splash/LaunchImage-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/static/img/splash/launch-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/static/img/splash/launch-1668x2224.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/static/img/splash/launch-2048x2732.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
-->
    <!-- Title and Favicon -->
    <title>Forex League App | Position Size Calculator</title>

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Assistant&family=Open+Sans&family=Roboto:wght@400&family=Titillium+Web:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.css" rel="stylesheet">

    <style>
        html {
            height: 100vh;
            font-family: 'Roboto', sans-serif;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-image: linear-gradient(to bottom right, #f5990f, #f5c623);
            /* position: fixed; */
            overflow: hidden;
            /* overscroll-behavior: none !important; */
        }
        body {
            height: 100% !important;
            margin: 0;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-image: linear-gradient(to bottom right, #f5990f, #f5c623);
            font-family: 'Assistant', sans-serif;
            position: fixed;
            overflow-y: scroll;
            /* -webkit-overflow-scrolling: touch; */
            overscroll-behavior: none !important;
            padding: env(safe-area-inset-top, 0px) env(safe-area-inset-right, 0px) env(safe-area-inset-bottom, 0px) env(safe-area-inset-right, 0px);
            position: fixed
        }

        html, body {
            overflow-x: hidden;
        }

        body::-webkit-scrollbar {
            display: none;
        }

        /* button, .swal-button-container, .swal-button {
                background-image: linear-gradient(to bottom right, #268aff, #28bdd7) !important;
        } */

        .radio-toolbar input[type="radio"] {
            display: none;
        }

        .radio-toolbar label {
            display: inline-block;
            background-color: #ddd;
            padding: 4px 11px;
            font-family: Arial;
            font-size: 16px;
            cursor: pointer;
        }

        .radio-toolbar input[type="radio"]:checked+label {
            background-color: #f5990f;
        }

        [type="radio"]:not(:checked)+span:before, [type="radio"]:not(:checked)+span:after {
            border: 2px solid #cfdfe2;
            width: 20px;
            height: 20px;
        }

        [type="radio"]:checked+span:after, [type="radio"].with-gap:checked+span:before, [type="radio"].with-gap:checked+span:after {
            border: 2px solid #f5990f;
            background-color: #f5990f;
            width: 20px;
            height: 20px;
        }

        input {
            font-size: 35px !important;
            height: 56px !important;
            color: #fff !important;
            font-family: 'Roboto', sans-serif;
            caret-color: #FFFF00 !important;
        }

        /* .caret {
        fill: white !important;
        } */

        .header {
            margin-left: 8px;
            margin-right: 8px;
        }

        .main {
            margin-left: 8px;
            margin-right: 8px;
        }

        .btn {
            width: 100%;
            text-transform: capitalize;
            font-size: 18px;
            line-height: 42px;
            height: 45px;
            /* margin-top: 24px; */
            margin-bottom: 24px;
            border-radius: 5px !important;
            padding-left: 25px;
            padding-right: 25px;
        }

        /* button, .swal-button-container, .swal-button {
                background-image: linear-gradient(to bottom right, #268aff, #28bdd7) !important;
        } */

        .input-field .inputlabel {
            font-size: 18px !important;
        }

        .selectlabel {
            color: white;
            font-size: 14.8px !important;
            border: none;
        }

        /* placeholder color */
        ::placeholder, .disabled::placeholder {
            color: white !important;
            opacity: 1 !important; /* Firefox */
        }
        /* label color */
        .input-field label {
            color: #fff !important;
        }
        /* label focus color */
        .input-field input[type=text]:focus + label {
            color: #fff !important;
        }
        .input-field input[type=number]:focus + label {
            color: #fff !important;
        }
        /* label underline focus color */
        .input-field input {
            border-bottom: 1px solid #cfdfe2;
        }
        .input-field input[type=number] {
            border-bottom: 1px solid #cfdfe2;
        }
        /* label underline focus color */
        .input-field input[type=number]:focus {
            border-bottom: 1px solid #cfdfe2 !important;
            box-shadow: 0 1px 0 0 #cfdfe2 !important;
        }
        /* label underline focus color */
        .input-field input[type=text]:focus {
            border-bottom: 1px solid #cfdfe2 !important;
            box-shadow: 0 1px 0 0 #cfdfe2 !important;
        }
        .input-field input[type=text]:valid {
            border-bottom: 1px solid #cfdfe2;
        }
        .input-field input[type=text]:invalid {
            border-bottom: 1px solid #cfdfe2;
        }
        /* icon prefix focus color */
        .input-field .prefix.active {
            color: #fff;
        }

        .select-wrapper li:not(:first-child) span {
            color: #000 !important;
        }

        .fresh-button {
            margin: 10px;
            font-family: 'Roboto', sans-serif;
            font-size: 20px;
            padding: 5px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-color: white;
            background-size: 200% auto;
            color: #000;
            box-shadow: 0 0 20px #eee;
            border-radius: 10px;
            width: 200px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            cursor: pointer;
            display: inline-block;
            border-radius: 25px;
        }

        .direction-button {
            margin: 10px;
            font-family: 'Roboto', sans-serif;
            font-size: 20px;
            padding: 5px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-color: white;
            background-size: 200% auto;
            color: #000;
            box-shadow: 0 0 20px #eee;
            border-radius: 10px;
            width: 200px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            cursor: pointer;
            display: inline-block;
            border-radius: 25px;
        }

        .direction-button-selected {
            margin: 10px;
            font-family: 'Roboto', sans-serif;
            font-size: 20px;
            padding: 5px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-color: white;
            background-size: 200% auto;
            color: #fff;
            box-shadow: 0 0 20px #eee;
            border-radius: 10px;
            width: 200px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            cursor: pointer;
            display: inline-block;
            border-radius: 25px;
        }

        .long-button-selected {
            margin: 10px;
            font-family: 'Roboto', sans-serif;
            font-size: 20px;
            padding: 5px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-color: #00b804;
            background-size: 200% auto;
            color: #fff;
            box-shadow: 0 0 20px #eee;
            border-radius: 10px;
            width: 200px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            cursor: pointer;
            display: inline-block;
            border-radius: 25px;
        }

        .short-button-selected {
            margin: 10px;
            font-family: 'Roboto', sans-serif;
            font-size: 20px;
            padding: 5px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-color: #ff0000;
            background-size: 200% auto;
            color: #fff;
            box-shadow: 0 0 20px #eee;
            border-radius: 10px;
            width: 200px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            cursor: pointer;
            display: inline-block;
            border-radius: 25px;
        }

        .calc-button {
            margin: 0px;
            font-family: 'Roboto', sans-serif;
            font-size: 20px;
            padding: 7px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-color: white;
            background-size: 200% auto;
            color: #000000;
            box-shadow: 0 0 20px #eee;
            border-radius: 10px;
            min-width: 400px;
            padding-left: 10px;
            padding-right: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            cursor: pointer;
            display: inline-block;
            border-radius: 25px;
        }

        .changeSL::-webkit-input-placeholder {
            /* WebKit, Blink, Edge */
            color: red;
        }

        .changeTP::-webkit-input-placeholder {
            /* WebKit, Blink, Edge */
            color: green;
        }

        /* label underline focus color */
        .input-field input[type=text]:focus {
            border-bottom: 1px solid #000;
            box-shadow: 0 1px 0 0 #000;
        }

        body {
            -moz-transform: scale(0.8, 0.8); /* Moz-browsers */
            zoom: 0.8; /* Other non-webkit browsers */
            zoom: 80%; /* Webkit browsers */
        }

        input, select {
            margin-top: 10px !important;
        }

        .ad2hs-prompt {
            background-color: rgb(245, 153, 15);
            border: none;
            display: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;

            position: absolute;
            margin: 0 1rem 1rem;
            left: 0;
            right: 0;
            bottom: 0;
            width: calc(100% - 32px);
        }

        .ios-prompt {
            background-color: #fcfcfc;
            border: 1px solid #666;
            display: none;
            padding: 0.8rem 1rem 0 0.5rem;
            text-decoration: none;
            font-size: 16px;
            color: #555;

            margin: 0 auto 1rem;
            left: 1rem;
            right: 1rem;
            bottom: 0;
        }

        .fa-instagram {
            padding:4px 6px;
            -o-transition:.5s;
            -ms-transition:.5s;
            -moz-transition:.5s;
            -webkit-transition:.5s;
            transition: .5s;
        }

        .fa-facebook {
            padding:4px 6px;
            -o-transition:.5s;
            -ms-transition:.5s;
            -moz-transition:.5s;
            -webkit-transition:.5s;
            transition: .5s;
        }

        .fa-twitter {
            padding:4px 6px;
            -o-transition:.5s;
            -ms-transition:.5s;
            -moz-transition:.5s;
            -webkit-transition:.5s;
            transition: .5s;
        }

        .fa-youtube {
            padding:4px 6px;
            -o-transition:.5s;
            -ms-transition:.5s;
            -moz-transition:.5s;
            -webkit-transition:.5s;
            transition: .5s;
        }

    </style>
</head>

<body>
<ul id="slide-out" class="sidenav">
    <li><div class="user-view">
        <a href="#user" style=""><img class="circle" src="Pictures/ForexLeaguecoloredBackground_Iphone7.jpg"><img></a>
    </div></li>
    <li style="margin-top: 30px;"><div class="divider"></div></li>

    <li><a href=""><!--add link to fx league--><i class="material-icons waves-effect">insert_link</i>Learn with Forex League</a></li>
    <li><div class="divider"></div></li>
    <li><a href="https://www.instagram.com/forexleague/" class="social-icon"> <i class="fa fa-instagram"></i>@forexleague</a></li>
    <li><div class="divider"></div></li>
    <!--other social media like twitter, fb etc??-->
    <li><a href="" class="social-icon"> <i class="fa fa-youtube"></i>YouTube</a></li><!--youtube link adden-->
    <li><div class="divider"></div></li>

    <li><a href="#modal1" class="modal-trigger waves-effect"><i class="material-icons">settings</i>Settings</a></li>
    <li><div class="divider"></div></li>


</ul>

<div id="modal1" class="modal" style="position:absolute; margin-top:25%;">
    <div class="modal-content">
        <h4>Choose Base Currency</h4>
    </div>

    <form action="#" style="margin-left: 20%;">
        <p>
            <label>
                <input name="group1" type="radio" onchange="currencyChanged('usd')" id="usd" value="$" checked/>
                <span style="color: black">USD üá∫üá∏</span>
            </label>
        </p>
        <p>
            <label>
                <input name="group1" type="radio" onchange="currencyChanged('eur')" id="eur" value="‚Ç¨" />
                <span style="color: black">EUR üá™üá∫</span>
            </label>
        </p>
        <p>
            <label>
                <input name="group1" type="radio" onchange="currencyChanged('gbp')" id="gbp" value="¬£" />
                <span style="color: black">GBP üá¨üáß</span>

            </label>
        </p>
        <p>
            <label>
                <input name="group1" type="radio" onchange="currencyChanged('aud')" id="aud" value="$"/>
                <span style="color: black">AUD üá¶üá∫</span>
            </label>
        </p>
        <p>
            <label>
                <input name="group1" type="radio" onchange="currencyChanged('cad')" id="cad" value="$"/>
                <span style="color: black">CAD üá®üá¶</span>
            </label>
        </p>
        <p>
            <label>
                <input name="group1" type="radio" onchange="currencyChanged('zar')" id="zar" value="R"/>
                <span style="color: black">ZAR üáøüá¶</span>
            </label>
        </p>
    </form>

    <div class="modal-footer right">
        <a href="#!" class="modal-close waves-effect waves-green btn swal-button" style="width: 20%; margin-top: -10px; margin-right: 10px;">Set</a>
        <!-- <a href="#!" class="waves-effect waves-dark z-depth-2 btn white black-text">
              Set Account Currency
        </a> -->

    </div>
</div>

<div class="mainwrapper">

    <div class="row header">
        <div class="col s12 center">
            <a href="#" data-target="slide-out" class="sidenav-trigger">
                <i class="material-icons white-text left" style="margin-top: 30px; font-size: 32px;">menu</i>
            </a>

            <a href=""><!--add link to fx league-->
                <img style="width: 50vw; margin-top: 35px; margin-bottom: 14px; margin-left: 42px; margin-right: 42px; filter: brightness(10000%);" src=""><img
                        src="Pictures/FXLeague_Logo_BGNONE.png" />
            </a>

            <a href="">
                <img style="width: 4vw; filter: brightness(10000%);" src="https://img.icons8.com/nolan/64/clear-symbol.png">
            </a>

        </div>
    </div>

    <div class="row main">
        <form class="col s12">
            <div class="row">
                <div class="input-field col s6">
                    <!-- <input onfocus="handlePrice('account_balance'); removeCommas('account_balance')" onkeydown="handlePrice('account_balance'); resetRisk();" onblur="handleCommas('account_balance'); validate('account_balance');" type="text" pattern="\d*" class="white-text" placeholder="$0.00" id="account_balance"> -->
                    <input onfocus="handlePrice('account_balance'); removeCommas('account_balance')" onkeydown="handlePrice('account_balance'); resetRisk();" onblur="handleCommas('account_balance');" type="text" pattern="\d*" class="white-text" placeholder="$0.00" id="account_balance">
                    <label class="inputlabel" for="account_balance" style="font-weight: bold;">Account Balance *</label>
                </div>
                <div class="col s6" style="color: #cfdfe2;">
                    <label class="selectlabel" for="Leverage" style="font-weight: bold;">Account Leverage *</label>
                    <select class="browser-default" id="leverage" style="background-color: transparent; font-size: 32px; font-family: 'Roboto', sans-serif; height: 55px; margin-top: 3px !important; padding: 0; padding-left: 5px; color: #fff !important; border-bottom: 1px solid #cfdfe2 !important;  border: 0px; outline: 0px; -webkit-appearance: none;">
                        <option value="" disabled selected>Select</option>
                        <option value="25" style="color:black">25</option>
                        <option value="50" style="color:black">50</option>
                        <option value="100" style="color:black">100</option>
                        <option value="200" style="color:black">200</option>
                        <option value="300" style="color:black">300</option>
                        <option value="400" style="color:black">400</option>
                        <option value="500" style="color:black" selected>500</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s6">
                    <!-- <input onkeyup="changeRiskAmount();" onfocus="removePercent('risk');" onblur="handlePercent('risk'); handleCommas('risk_amount'); validate('risk');" class="white-text" placeholder="0%" id="risk" type="text"> -->
                    <input onkeyup="changeRiskAmount();" onfocus="removePercent('risk');" onblur="handlePercent('risk'); handleCommas('risk_amount');" class="white-text" placeholder="0%" id="risk" type="text" pattern="\d*">
                    <label class="inputlabel" for="risk" style="font-weight: bold;">Risk Percent*</label>
                </div>
                <div class="input-field col s6">
                    <!-- <input onfocus="removeCommas('risk_amount');" onkeyup="handlePrice('risk_amount'); changeRisk();" onblur="handleCommas('risk_amount'); validate('risk');" class="white-text" placeholder="$0" id="risk_amount" type="text"> -->
                    <input onfocus="removeCommas('risk_amount');" onkeyup="handlePrice('risk_amount'); changeRisk();" onblur="handleCommas('risk_amount');" class="white-text" placeholder="$0" id="risk_amount" type="text" pattern="\d*">
                    <label class="inputlabel" for="risk_amount" style="font-weight: bold;">Risk Amount *</label>
                </div>
            </div>

            <div class="row" style="margin-bottom: 34px;">
                <div class="col s6" style="color: #cfdfe2;">
                    <label class="selectlabel" style="font-weight: bold;">Asset Class *</label>
                    <select class="browser-default" style="background-color: transparent; font-size: 32px; font-family: 'Roboto', sans-serif; height: 55px; margin-top: 3px !important; padding: 0; padding-left: 5px; color: #fff !important; border-bottom: 1px solid #cfdfe2 !important; border: 0px; outline: 0px; -webkit-appearance: none;" id="asset_classes" onchange="showCurrencyPairs()">
                        <option value="" disabled selected>Select</option>
                    </select>
                </div>
                <!-- </div>
                        <div class="row" id="currency_pairs_row" style="margin-bottom: 38px; display: none;"> -->
                <div class="col s6" style="color: #cfdfe2;">
                    <label class="selectlabel" style="font-weight: bold;">Instrument *</label>
                    <select class="browser-default" style="background-color: transparent; font-size: 32px; font-family: 'Roboto', sans-serif; height: 55px; margin-top: 3px !important; padding: 0; padding-left: 5px; color: #fff !important; border-bottom: 1px solid #cfdfe2 !important; border: 0px; outline: 0px; -webkit-appearance: none;" id="currency_pair" onchange="changeCurrentPrice()">
                        <option value="" disabled selected>Select</option>
                    </select>
                </div>
            </div>
            <div class="row" id="current_price_row" style="display: none;">
                <div class="input-field col s6">
                    <input placeholder="0" id="disabled" type="number"  tabindex="-1" class="white-text" onkeyup="clearValues()">
                    <label class="inputlabel" for="disabled" style="font-weight: bold;">Entry Price *</label>
                    <input placeholder="0" id="currentDigit" type="number"  tabindex="-1" style="display: none;">
                </div>

                <div class="input-field col s6">
                    <a style="font-weight: bold;" id="refresh_btn" onclick="refreshPrice()" class="waves-effect waves-dark fresh-button">
                        Refresh üîÑ
                    </a>
                </div>
            </div>


            <div class="row">
                <div class="col s12" style="color: #cfdfe2; font-weight: bold;">
                    <label class="selectlabel">Direction *</label>
                </div>

                <!-- <div class="col s6" style="color: #cfdfe2;">
                        <p>
                                <label>
                                        <input id="long" class="with-gap" name="group1" type="radio"  />
                                        <span style="font-size: 35px" class="white-text">Long</span>
                                </label>
                        </p>
                </div>

                <div class="col s6" style="color: #cfdfe2;">
                        <p>
                                <label>
                                        <input id="short" class="with-gap" name="group1" type="radio"  />
                                        <span style="font-size: 35px" class="white-text">Short</span>
                                </label>
                        </p>
                </div> -->

                <!-- <div class="input-field col s6">
                    <a id="short_btn" style="margin-bottom: 0;" onclick="switchDirection('Short')" class="waves-effect waves-dark z-depth-2 btn white black-text">
                            Short ‚¨áÔ∏è
                    </a>
                </div>
                <div class="input-field col s6">
                    <a id="long_btn" style="margin-bottom: 0;" onclick="switchDirection('Long')" class="waves-effect waves-dark z-depth-2 btn white black-text">
                            Long ‚¨ÜÔ∏è
                    </a>
                </div> -->



                 <div class="input-field col s6">
                    <a id="short_btn" style="margin-bottom: 0;" onclick="switchDirection('Short')" class="direction-button">
                            Short ‚¨áÔ∏è
                    </a>
                </div>
                <div class="input-field col s6">
                    <a id="long_btn" style="margin-bottom: 0;" onclick="switchDirection('Long')" class="direction-button">
                            Long ‚¨ÜÔ∏è
                    </a>
                </div>

            </div>


            <div class="row">
                <div class="input-field col s6">
                    <!-- <input onkeyup="changeStopLossPercent()" onblur="validate('stop_loss')" id="stop_loss" class="white-text" placeholder="0" type="number"> -->
                    <input onkeyup="changeStopLossPercent()" onfocus="this.placeholder = ''" onblur="this.placeholder = '0'" id="stop_loss" class="white-text" placeholder="0" type="number">
                    <label class="inputlabel" for="stop_loss" style="background-color: red; padding: 1px; padding-left: 5px; padding-right: 5px; font-weight: bold;">Stop Loss Price *</label>
                </div>

                <div class="input-field col s6">
                    <!-- <input onkeyup="changeTakeProfitPercent()" onblur="validate('take_profit')" id="take_profit" class="white-text" placeholder="0" take_profit type="number"> -->
                    <input onkeyup="changeTakeProfitPercent()" onfocus="this.placeholder = ''" onblur="this.placeholder = '0'" id="take_profit" class="white-text" placeholder="0" take_profit type="number">
                    <label class="inputlabel" for="take_profit" style="background-color: #00b804; padding: 1px; padding-left: 5px; padding-right: 5px; font-weight: bold;">Take Profit Price</label>
                </div>
            </div>

            <div class="row" style="margin-bottom: 14px;">
                <div class="input-field col s6">
                    <!-- <input placeholder="0" id="stop_loss_pips" type="text" readonly="readonly" onfocus="this.blur();" tabindex="-1" class="white-text"> -->
                    <input onkeyup='changeStopLossPips()' onblur="handleCommas('stop_loss_pips'); this.placeholder = '0'" onfocus="removeCommas('stop_loss_pips'); this.placeholder = ''" placeholder="0" id="stop_loss_pips" type="text" tabindex="-1" class="white-text" pattern="\d*">
                    <label class="inputlabel" for="stop_loss_pips" style="background-color: red; padding: 1px; padding-left: 5px; padding-right: 5px; font-weight: bold;">SL (Pips) *</label>
                </div>

                <div class="input-field col s6">
                    <!-- <input placeholder="0" id="take_profit_pips" type="text" readonly="readonly" onfocus="this.blur();" tabindex="-1" class="white-text"> -->
                    <input onkeyup="changeTakeProfitPips()" onblur="handleCommas('take_profit_pips'); this.placeholder = '0'" onfocus="removeCommas('take_profit_pips'); this.placeholder = ''" placeholder="0" id="take_profit_pips" type="text" tabindex="-1" class="white-text" pattern="\d*">
                    <label class="inputlabel" for="take_profit_pips" style="background-color: #00b804; padding: 1px; padding-left: 5px; padding-right: 5px; font-weight: bold;">TP (Pips)</label>
                </div>
            </div>

            <div class="row" style="margin-bottom: 14px;">
                <div class="input-field col s6">
                    <!-- <input placeholder="0%" id="stop_loss_percent" type="text" readonly="readonly" onfocus="this.blur();" tabindex="-1" class="white-text"> -->
                    <input placeholder="0%" onkeyup="ChangeStopLoss()" onfocus="removePercent('stop_loss_percent'); this.placeholder = ''" onblur="handlePercent('stop_loss_percent'); this.placeholder = '0'" id="stop_loss_percent" type="text" tabindex="-1" class="white-text" pattern="\d*">
                    <label class="inputlabel" for="stop_loss_percent" style="background-color: red; padding: 1px; padding-left: 5px; padding-right: 5px; font-weight: bold;">SL (% Change) *</label>
                </div>

                <div class="input-field col s6">
                    <!-- <input placeholder="0%" id="take_profit_percent" type="text" readonly="readonly" onfocus="this.blur();" tabindex="-1" class="white-text"> -->
                    <input placeholder="0%" onkeyup="changeTakeProfit();" onfocus="removePercent('take_profit_percent'); this.placeholder = ''" onblur="handlePercent('take_profit_percent'); this.placeholder = '0'" id="take_profit_percent" type="text" tabindex="-1" class="white-text" pattern="\d*">
                    <label class="inputlabel" for="take_profit_percent" style="background-color: #00b804; padding: 1px; padding-left: 5px; padding-right: 5px; font-weight: bold;">TP (% Change)</label>
                </div>
            </div>

            <!-- <div class="row" style="margin-bottom: 14px;">
                    <div class="input-field col s12">
                            <a onclick="calculatePositionSize()" class="waves-effect waves-dark z-depth-2 btn white black-text">
                                    <i class="material-icons right">arrow_forward</i>
                                    Calculate Position Size
                            </a>
                    </div>
            </div> -->
            <div style="text-align:center; font-weight: bold;">
                <a onclick="calculatePositionSize()" class="calc-button waves-effect waves-dark">
                    Calculate Position Size
                </a>
            </div>
        </form>
    </div>

    <!-- <div class=" ad2hs-prompt fixed-action-btn">
            <button type="button" class="ad2hs-prompt" >Install Web App</button>
    </div> -->

    <div class=" ios-prompt fixed-action-btn">
        <span style="color: rgb(187, 187, 187); float: right; margin-top: -14px; margin-right: -11px;">&times;</span>
        <img src="/apple-touch-icon.png" style="float: left; height: 80px; width: auto; margin-top: -8px; margin-right: 1rem;">
        <p style="margin-top: -3px; line-height: 1.3rem;">To install this Web App on your Apple device press <img src="/share.svg" style="display: inline-block; margin-top: 4px; margin-bottom: -4px; height: 20px; width: auto;"> and then "Add to Home Screen" (from Safari only)</p>
    </div>
</div>

<!-- JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
<!-- <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
<script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>

<script type="text/javascript" src="runtime.js"></script>
<script type="text/javascript" src="polyfills.js"></script>
<script type="text/javascript" src="main.js"></script>

<script type="text/javascript">
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
            .then(() => console.log('service worker installed'))
            .catch(err => console.error('Error', err));
    }

    function addToHomeScreen() {
        let a2hsBtn = document.querySelector(".ad2hs-prompt");  // hide our user interface that shows our A2HS button
        a2hsBtn.style.display = 'none';  // Show the prompt
        deferredPrompt.prompt();  // Wait for the user to respond to the prompt
        deferredPrompt.userChoice
            .then(function(choiceResult){

                if (choiceResult.outcome === 'accepted') {
                    console.log('User accepted the A2HS prompt');
                } else {
                    console.log('User dismissed the A2HS prompt');
                }

                deferredPrompt = null;

            });}

    function showAddToHomeScreen() {

        let a2hsBtn = document.querySelector(".ad2hs-prompt");
        a2hsBtn.style.display = "block";
        a2hsBtn.addEventListener("click", addToHomeScreen);

    }

    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', function (e) {
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;

        showAddToHomeScreen();
    });

    function showIosInstall() {
        let iosPrompt = document.querySelector(".ios-prompt");
        iosPrompt.style.display = "block";
        iosPrompt.addEventListener("click", () => {
            iosPrompt.style.display = "none";
        });
    }

    // Detects if device is on iOS
    const isIos = () => {
        const userAgent = window.navigator.userAgent.toLowerCase();
        return /iphone|ipad|ipod/.test( userAgent );
    }

    // Detects if device is on Android
    const isDroid = () => {
        const userAgent = window.navigator.userAgent.toLowerCase();
        return /android/.test( userAgent);
    }

    // Detects if device is in standalone mode
    const isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);

    // Checks if should display install popup notification:
    if (isIos() && !isInStandaloneMode()) {
        // this.setState({ showInstallMessage: true });
        showIosInstall();
    }

    // Checks if it should display a2hs notification
    if (isDroid() && !isInStandaloneMode()){
        showAddToHomeScreen();
    }

</script>

<script>
    function validate(id) {
        if (id == "account_balance") {
            var account_balance = document.getElementById("account_balance").value;
            if (account_balance != "") {
                account_balance = account_balance.split("$")[1].replace(/,/g, '');
            }

            if (account_balance <= 0 || account_balance == "" || typeof account_balance == "undefined" || isNaN(account_balance)) {
                $("#" + id).css('border-bottom', 'solid 2px red');
                Swal.fire({
                    title: "ERROR CALCULATING POSITION SIZE",
                    text: "Please enter a non-zero number for account balance.",
                    icon: "error",
                    button: "Done",
                });
                return
            } else {
                $("#" + id).css('border-bottom', 'solid 1px #cfdfe2');
            }
        }

        if (id == "risk") {
            var risk = document.getElementById("risk").value.split("%")[0];

            if (risk < 0 || risk == "" || typeof risk == "undefined" || isNaN(risk)) {
                $("#" + id).css('border-bottom', 'solid 2px red');
                Swal.fire({
                    title: "ERROR CALCULATING POSITION SIZE",
                    text: "Please enter a non-zero percent for risk.",
                    icon: "error",
                    button: "Done",
                });
                return
            } else if (risk > 100) {
                $("#" + id).css('border-bottom', 'solid 2px red');
                Swal.fire({
                    title: "ERROR CALCULATING POSITION SIZE",
                    text: "Please enter a percent for risk less than 100%.",
                    icon: "error",
                    button: "Done",
                });
                return
            } else {
                $("#" + id).css('border-bottom', 'solid 1px #cfdfe2');
            }
        }

        if (id == "stop_loss") {
            var price = document.getElementById("disabled").value;
            var direction = window.direction;
            var stop_loss = document.getElementById("stop_loss").value;

            // basic checks
            if (stop_loss <= 0 || stop_loss == "" || typeof stop_loss == "undefined" || isNaN(stop_loss)) {
                $("#" + id).css('border-bottom', 'solid 2px red');
                Swal.fire({
                    title: "ERROR CALCULATING POSITION SIZE",
                    text: "Please enter a non-zero value for stop loss.",
                    icon: "error",
                    button: "Done",
                });
                return
            } else {
                $("#" + id).css('border-bottom', 'solid 1px #cfdfe2');
            }

            if (direction == "Long") {
                if (parseFloat(stop_loss) >= parseFloat(price)) {
                    $("#" + id).css('border-bottom', 'solid 2px red');
                    Swal.fire({
                        title: "ERROR CALCULATING POSITION SIZE",
                        text: "The selected direction is \"Long,\" so please enter a stop loss that is less than the current price.",
                        icon: "error",
                        button: "Done",
                    });
                    return
                }
            } else if (direction == "Short") {
                if (parseFloat(stop_loss) <= parseFloat(price)) {
                    $("#" + id).css('border-bottom', 'solid 2px red');
                    Swal.fire({
                        title: "ERROR CALCULATING POSITION SIZE",
                        text: "The selected direction is \"Short,\" so please enter a stop loss that is greater than the current price.",
                        icon: "error",
                        button: "Done",
                    });
                    return
                }
            } else {
                $("#" + id).css('border-bottom', 'solid 1px #cfdfe2');
            }
        }

        if (id == "take_profit") {
            var price = document.getElementById("disabled").value;
            var direction = window.direction;
            var take_profit = document.getElementById("take_profit").value;

            // basic checks
            // if (take_profit < 0 || take_profit == "" || typeof take_profit == "undefined" || isNaN(take_profit)) {
            //         $("#" + id).css('border-bottom', 'solid 2px red');
            //         Swal.fire({
            //                 title: "ERROR CALCULATING POSITION SIZE",
            //                 text: "Please enter a non-zero value for take profit.",
            //                 icon: "error",
            //                 button: "Done",
            //         });
            //         return
            // } else {
            //         $("#" + id).css('border-bottom', 'solid 1px #cfdfe2');
            // }

            if (direction == "Long") {
                if (parseFloat(take_profit) <= parseFloat(price)) {
                    $("#" + id).css('border-bottom', 'solid 2px red');
                    Swal.fire({
                        title: "ERROR CALCULATING POSITION SIZE",
                        text: "The selected direction is \"Long,\" so please enter a take profit that is greater than the current price.",
                        icon: "error",
                        button: "Done",
                    });
                    return
                }
            } else if (direction == "Short") {
                if (parseFloat(take_profit) >= parseFloat(price)) {
                    $("#" + id).css('border-bottom', 'solid 2px red');
                    Swal.fire({
                        title: "ERROR CALCULATING POSITION SIZE",
                        text: "The selected direction is \"Short,\" so please enter a take profit that is less than the current price.",
                        icon: "error",
                        button: "Done",
                    });
                    return
                }
            } else {
                $("#" + id).css('border-bottom', 'solid 1px #cfdfe2');
            }
        }
    }

    function currencyChanged(id) {
        var cur = $('input[name="group1"]:checked').val();

        if (cur == '$'){
            $("#account_balance").attr("placeholder", "$0.00");
            $("#risk_amount").attr("placeholder", "$0");
            $('#account_balance').val('');
            $('#risk').val('');
            $('#risk_amount').val('');
        }

        if (cur == '‚Ç¨'){
            $("#account_balance").attr("placeholder", "‚Ç¨0.00");
            $("#risk_amount").attr("placeholder", "‚Ç¨0");
            $('#account_balance').val('');
            $('#risk').val('');
            $('#risk_amount').val('');
        }

        if (cur == '¬£'){
            $("#account_balance").attr("placeholder", "¬£0.00");
            $("#risk_amount").attr("placeholder", "¬£0");
            $('#account_balance').val('');
            $('#risk').val('');
            $('#risk_amount').val('');
        }

        if (cur == 'R'){
            $("#account_balance").attr("placeholder", "R0.00");
            $("#risk_amount").attr("placeholder", "R0");
            $('#account_balance').val('');
            $('#risk').val('');
            $('#risk_amount').val('');
        }

        console.log(document.getElementById('account_balance').value);
        return

        var act = document.getElementById('account_balance').value;

        var newVal = act.slice(1)

        document.getElementById('account_balance').value = cur + newVal;






        // for(i = 0; i < myValue.length; i++) {
        //         if(myValue[i].checked)
        //                 console.log(myValue[i].value);
        // }
        // return;

        // if (myValue.indexOf("$") == -1)
        // {
        //         myValue = "$" + myValue;
        // }

        // // myValue = numeral(myValue).format('$0,0.00');

        // document.getElementById(id).value = myValue;
    }

    function handlePrice(id) {
        var myValue = document.getElementById(id).value;
        var cur = $('input[name="group1"]:checked').val();

        // For USD
        if (cur == '$'){
            if (myValue.indexOf("$") == -1)
            {
                myValue = myValue.replace('‚Ç¨', '');
                myValue = myValue.replace('¬£', '');
                myValue = myValue.replace('R', '');
                myValue = "$" + myValue;
            }
        }

        else if (cur == '‚Ç¨'){
            if (myValue.indexOf("‚Ç¨") == -1)
            {
                myValue = myValue.replace('$', '');
                myValue = myValue.replace('R', '');
                myValue = myValue.replace('¬£', '');
                myValue = "‚Ç¨" + myValue;
            }
        }

        else if (cur == '¬£'){
            if (myValue.indexOf("¬£") == -1)
            {
                myValue = myValue.replace('‚Ç¨', '');
                myValue = myValue.replace('$', '');
                myValue = myValue.replace('R', '');
                myValue = "¬£" + myValue;
            }
        }

        else if (cur == 'R'){
            if (myValue.indexOf("R") == -1)
            {
                myValue = myValue.replace('$', '');
                myValue = myValue.replace('‚Ç¨', '');
                myValue = myValue.replace('¬£', '');
                myValue = "R" + myValue;
            }
        }

        document.getElementById(id).value = myValue;
    }

    function numberWithCommas(x) {
        var parts = x.toString().split(".");
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return parts.join(".");
    }

    function handleCommas(id) {
        var cur = $('input[name="group1"]:checked').val();
        var input = document.getElementById(id).value;

        if (input.indexOf(cur) == -1) {
            document.getElementById(id).value = numberWithCommas(input);
        } else {
            input = input.split(cur)[1];
            document.getElementById(id).value = cur + numberWithCommas(input);
        }
    }

    function removeCommas(id) {
        var input = document.getElementById(id).value;

        if (input.indexOf(",") > -1) {
            document.getElementById(id).value = input.replace(/,/g, '');
        }
    }

    function handlePercent(id) {
        var myValue = document.getElementById(id).value;

        if (myValue.indexOf("%") == -1)
        {
            myValue = myValue + "%";
        }

        document.getElementById(id).value = myValue;
    }

    function removePercent(id) {
        var myValue = document.getElementById(id).value;

        if (myValue.indexOf("%") > -1) {
            myValue = myValue.replace('%', '')
        }

        document.getElementById(id).value = myValue;
    }

    function resetRisk() {
        document.getElementById("risk").value = "";
        document.getElementById("risk_amount").value = "";
    }

    function changeRiskAmount() {
        var cur = $('input[name="group1"]:checked').val();
        var account_balance = document.getElementById("account_balance").value;

        console.log("cur: " + cur);

        if (account_balance != "") {
            account_balance = account_balance.split(cur)[1].replace(/,/g, '');
        }

        if (account_balance <= 0 || account_balance == "" || typeof account_balance == "undefined" || isNaN(account_balance)) {
            return
        }

        var risk = document.getElementById("risk").value.split("%")[0];

        if (risk < 0 || risk == "" || typeof risk == "undefined" || isNaN(risk) || risk > 100) {
            return
        }

        var percentage = parseFloat(account_balance) * parseFloat(risk)/100;

        document.getElementById("risk_amount").value = cur + percentage;
    }

    function changeRisk() {
        var cur = $('input[name="group1"]:checked').val();
        var account_balance = document.getElementById("account_balance").value;
        console.log("cur: " + cur);

        if (account_balance != "") {
            account_balance = account_balance.split(cur)[1].replace(/,/g, '');
        }
        if (account_balance <= 0 || account_balance == "" || typeof account_balance == "undefined" || isNaN(account_balance)) {
            return
        }

        var risk_amount = document.getElementById("risk_amount").value;
        if (risk_amount != "") {
            risk_amount = risk_amount.split(cur)[1].replace(/,/g, '');
        }
        if (risk_amount < 0 || risk_amount == "" || typeof risk_amount == "undefined" || isNaN(risk_amount)) {
            return
        }

        var percentage = parseFloat(risk_amount) / parseFloat(account_balance);
        percentage = Math.round(percentage * 100 * 1000) / 1000;

        document.getElementById("risk").value = percentage + "%";
    }

    function switchDirection(new_direction) {
        window.direction = new_direction;
        if (window.direction == "Long") {
            $("#long_btn").removeClass("direction-button");
            $("#long_btn").addClass("long-button-selected");

            $("#short_btn").removeClass("short-button-selected");
            $("#short_btn").addClass("direction-button");

            // $("#long_btn").addClass("z-depth-0 blue");
            // $("#short_btn").removeClass("z-depth-0 red");

        } else if (window.direction == "Short") {
            $("#short_btn").removeClass("direction-button");
            $("#short_btn").addClass("short-button-selected");

            $("#long_btn").removeClass("long-button-selected");
            $("#long_btn").addClass("direction-button");

            // $("#short_btn").addClass("z-depth-0 red");
            // $("#long_btn").removeClass("z-depth-0 blue");
        }
    }

    function showCurrencyPairs() {
        var selected_asset_class = $("#asset_classes")[0].value;
        $("#currency_pair")[0].innerHTML = '<option value="" disabled selected>Select</option>';

        document.getElementById("disabled").value = "";
        document.getElementById("stop_loss").value = "";
        document.getElementById("take_profit").value = "";
        document.getElementById("stop_loss_pips").value = "";
        document.getElementById("take_profit_pips").value = "";
        document.getElementById("stop_loss_percent").value = "";
        document.getElementById("take_profit_percent").value = "";

        $.ajax({
            type: 'GET',
            url: `https://api.pytraders.com/assets/${selected_asset_class}`,
            success: function (res) {
                console.log(res);
                for (let index = 0; index < res.length; index++) {
                    const element = res[index];
                    $("#currency_pair")[0].innerHTML += `<option style="color:black" value='${element}'>${element}</option>`;
                }
                $('select').formSelect();
            },
            error: function (err) {
                console.log(err);
            }
        });
        // $("#currency_pairs_row").show();
    }

    function changeCurrentPrice() {
        var symbol = $("#currency_pair")[0].value;
        $.ajax({
            type: 'GET',
            url: 'https://api.pytraders.com/price/' + symbol,
            success: function (res) {
                console.log(res);
                var digits = res[0]["DIGITS"];
                var bid = res[0]["BID"];
                var ask = res[0]["ASK"];
                var mid = (bid + ask) / 2;
                document.getElementById("disabled").value = (Math.round(mid * 1000000) / 1000000).toFixed(digits);
                document.getElementById("currentDigit").value = digits;
                $("#current_price_row").show();
                document.getElementById("stop_loss").value = "";
                document.getElementById("take_profit").value = "";
                document.getElementById("stop_loss_percent").value = "";
                document.getElementById("take_profit_percent").value = "";
                document.getElementById("stop_loss_pips").value = "";
                document.getElementById("take_profit_pips").value = "";
            },
            error: function (err) {
                console.log(err);
                document.getElementById("disabled").value = "";
            }
        });
    }

    function clearValues() {
        document.getElementById("stop_loss").value = "";
        document.getElementById("take_profit").value = "";
        document.getElementById("stop_loss_percent").value = "";
        document.getElementById("take_profit_percent").value = "";
        document.getElementById("stop_loss_pips").value = "";
        document.getElementById("take_profit_pips").value = "";

    }

    function refreshPrice() {
        var symbol = $("#currency_pair")[0].value;
        $.ajax({
            type: 'GET',
            url: 'https://api.pytraders.com/price/' + symbol,
            success: function (res) {
                console.log(res);
                var digits = res[0]["DIGITS"];
                var bid = res[0]["BID"];
                var ask = res[0]["ASK"];
                var mid = (bid + ask) / 2;
                document.getElementById("disabled").value = (Math.round(mid * 1000000) / 1000000).toFixed(digits);
                document.getElementById("currentDigit").value = digits;
                $("#current_price_row").show();
            },
            error: function (err) {
                console.log(err);
                document.getElementById("disabled").value = "";
            }
        });
    }

    function changeStopLossPercent() {
        var price = document.getElementById("disabled").value;
        if (price == 0) {
            return
        }
        var sl = document.getElementById("stop_loss").value;

        var percentage = Math.round(Math.abs(price - sl)/price * 100 * 1000) / 1000;
        console.log(percentage);

        var digit = document.getElementById("currentDigit").value;
        console.log(document.getElementById("currentDigit").value);
        var pips = (Math.abs(price-sl)/Math.pow(1/10, (digit-1))).toFixed(1);

        document.getElementById("stop_loss_pips").value = pips;
        document.getElementById("stop_loss_percent").value = percentage + "%";
    }

    function changeTakeProfitPercent() {
        var price = document.getElementById("disabled").value;
        if (price == 0) {
            document.getElementById("take_profit_percent").value = "";
            document.getElementById("take_profit_pips").value = "";
            return
        }
        var tp = document.getElementById("take_profit").value;

        if (tp == 0) {
            document.getElementById("take_profit_percent").value = "";
            document.getElementById("take_profit_pips").value = "";
            return
        }

        var percentage = Math.round(Math.abs(price - tp)/price * 100 * 1000) / 1000;
        console.log(percentage);

        var digit = document.getElementById("currentDigit").value;
        console.log(document.getElementById("currentDigit").value);
        var pips = (Math.abs(price-tp)/Math.pow(1/10, (digit-1))).toFixed(1);

        document.getElementById("take_profit_pips").value = pips;
        document.getElementById("take_profit_percent").value = percentage + "%";
    }

    function changeTakeProfitPips() {
        var price = document.getElementById("disabled").value;
        if (price == 0) {
            return
        }
        var dir = window.direction;

        var tpPips = parseFloat(document.getElementById("take_profit_pips").value).toFixed(1);

        if (isNaN(tpPips))
        {
            document.getElementById("take_profit").value = 0;
            document.getElementById("take_profit_percent").value =  "0%";
            return;
        }

        var tp = 0;

        var digit = document.getElementById("currentDigit").value;
        if (dir == "Long"){
            tp = (parseFloat(price) + parseFloat((parseFloat(tpPips)*Math.pow(1/10, digit-1)).toFixed(digit)));
        }

        else if (dir == "Short"){
            tp = (parseFloat(price) - parseFloat((parseFloat(tpPips)*Math.pow(1/10, digit-1)).toFixed(digit)));
        }

        var percentage = Math.round(Math.abs(price - tp)/price * 100 * 1000) / 1000;

        document.getElementById("take_profit").value = parseFloat(tp).toFixed(digit);
        document.getElementById("take_profit_percent").value = percentage + "%";
    }

    function changeStopLossPips() {
        var price = document.getElementById("disabled").value;
        if (price == 0) {
            return
        }
        var dir = window.direction;

        var tpPips = parseFloat(document.getElementById("stop_loss_pips").value).toFixed(1);

        if (isNaN(tpPips))
        {
            document.getElementById("stop_loss").value = 0;
            document.getElementById("stop_loss_percent").value =  "0%";
            return;
        }

        var sl = 0;

        var digit = document.getElementById("currentDigit").value;
        if (dir == "Long"){
            sl = (parseFloat(price) - parseFloat((parseFloat(tpPips)*Math.pow(1/10, digit-1)).toFixed(digit)));
        }

        else if (dir == "Short"){
            sl = (parseFloat(price) + parseFloat((parseFloat(tpPips)*Math.pow(1/10, digit-1)).toFixed(digit)));
        }

        var percentage = Math.round(Math.abs(price - sl)/price * 100 * 1000) / 1000;

        document.getElementById("stop_loss").value = parseFloat(sl).toFixed(digit);
        document.getElementById("stop_loss_percent").value = percentage + "%";
    }

    function changeTakeProfit() {
        var price = parseFloat(document.getElementById("disabled").value);
        if (price == 0) {
            return
        }

        price = parseFloat(price);

        var dir = window.direction;

        var tpPercent = parseFloat(document.getElementById("take_profit_percent").value);

        if (isNaN(tpPercent))
        {
            document.getElementById("take_profit").value = 0;
            document.getElementById("take_profit_pips").value =  0;
            return;
        }

        var tp = 0;
        var pips = 0;

        var digit = document.getElementById("currentDigit").value;
        if (dir == "Long"){
            tp = parseFloat((parseFloat(price) + parseFloat(price)*(tpPercent/100)).toFixed(digit));
            pips = (Math.abs(price-tp)/Math.pow(1/10, (digit-1))).toFixed(1);
        }

        else if (dir == "Short"){
            tp = parseFloat((parseFloat(price) - parseFloat(price)*(tpPercent/100)).toFixed(digit));
            pips = (Math.abs(price-tp)/Math.pow(1/10, (digit-1))).toFixed(1);
        }

        document.getElementById("take_profit").value = tp;
        document.getElementById("take_profit_pips").value = pips;
    }

    function ChangeStopLoss() {
        var price = document.getElementById("disabled").value;
        if (price == 0) {
            return
        }

        price = parseFloat(price);

        var dir = window.direction;

        var slPercent = parseFloat(document.getElementById("stop_loss_percent").value);

        if (isNaN(slPercent))
        {
            document.getElementById("stop_loss").value = 0;
            document.getElementById("stop_loss_pips").value =  0;
            return;
        }

        var sl = 0;
        var pips = 0;

        var digit = document.getElementById("currentDigit").value;
        if (dir == "Long"){
            sl = parseFloat((parseFloat(price) - parseFloat(price)*(slPercent/100)).toFixed(digit));
            pips = (Math.abs(price-sl)/Math.pow(1/10, (digit-1))).toFixed(1);
        }

        else if (dir == "Short"){
            sl = parseFloat((parseFloat(price) + parseFloat(price)*(slPercent/100)).toFixed(digit));
            pips = (Math.abs(price-sl)/Math.pow(1/10, (digit-1))).toFixed(1);
        }

        document.getElementById("stop_loss").value = sl;
        document.getElementById("stop_loss_pips").value = pips;
    }

    function postCalcCheck(posSize, reward, risk, balance, leverage, dollarRisk, percentRisk, notionalValue) {
        var pos = parseFloat(posSize);
        var cur = $('input[name="group1"]:checked').val();

        if (pos == 0){
            Swal.fire({
                title: "Whoops!",
                text: "Looks like you can't take that position with your account!",
                icon: "error",
                button: "Done",
            });
            return;
        }

        if ((notionalValue/balance) > leverage){
            Swal.fire({
                title: "Whoops!",
                text: "You can't take that position!\nIt requires more leverage than you have.",
                icon: "error",
                button: "Done",
            });
            return;
        }

        var rr = parseFloat(reward)/parseFloat(risk);

        var asset = $("#currency_pair")[0].value;
        var currentPrice = document.getElementById("disabled").value

        var msg = "Not set";
        var icn = "error";
        var emoji = "";

        var dir = window.direction;
        var recap = "";

        var stop_loss = document.getElementById("stop_loss").value;
        var take_profit = document.getElementById("take_profit").value;

        if (dir == "Short"){
            recap = "<span style=\"color:red;\">" + "<b>" + asset + " SHORT üìâ</b>" + "</span><br>";
        }
        else if (dir == "Long"){
            recap = "<span style=\"color:#f5990f;\">" + "<b>" + asset + " LONG üìà</b>" + "</span><br>";
        }

        var entry = "<b>Entry:</b> " + currentPrice.toString() + "<br>";
        var stopLoss = "<span style=\"color:red;\"><b>SL:</b> " + stop_loss.toString() + " (-" + cur + numberWithCommas((dollarRisk).toFixed(2)) + ")</span><br>";
        var takeProfit = "<span style=\"color:#00b804;\"><b>TP:</b> " + take_profit.toString() + " (+" + cur + numberWithCommas((dollarRisk*parseFloat(rr)).toFixed(2)) + ")</span><br>";


        if (rr<1 && rr>=0.7){
            msg = "Try to increase your risk to reward before taking this position.";
            icn = "warning";
            emoji = "&#x2716";

        }
        else if (rr < 0.7 && rr > 0){
            msg = "This is very poor risk to reward. Strongly urge you to wait on this trade or adjust your SL and TP.";
            icn = "warning";
            emoji = "&#x274C";
        }
        else if (rr>=1 && rr<2){
            msg = "Excellent risk to reward on this position.";
            icn = "success";
            emoji = "&#x2714;";
        }
        else if (rr>=2){
            msg = "Incredible risk to reward! Though, ensure that this setup is optimal as you will often face a much lower win rate with these targets.";
            icn = "success";
            emoji = "&#x2705;";
        }
        else{
            msg = "Setting a Take-Profit goal will help keep risk intact";
            icn = "success";
            Swal.fire({
                title: "Position Size: " + posSize,
                // type: "warning",
                html:   //"<span style=\"color:red;\"><b>Total Risk:</b> " + cur + numberWithCommas((dollarRisk).toFixed(2)) + " (" + (parseFloat(percentRisk).toFixed(2))  + "%) </span><br>" +
                    "<b>Notional Value:</b> " + numberWithCommas(notionalValue.toFixed(2)) + "<br>" +
                    "<b>Leverage Used:</b> " + (notionalValue/balance).toFixed(2) + "<br>" +
                    "<b>Margin Used:</b> " + ((notionalValue/(leverage*balance))*100).toFixed(2) + "%<br><br>" +
                    "<b>Comments:</b> " + msg + "<br>" +
                    "<hr>" +
                    recap +
                    entry +
                    stopLoss,
                icon: icn,
                // showCancelButton: true,
                // cancelButtonColor: '#d33',
                confirmButtonColor: '#f5990f',
                // cancelButtonText: "Close",
                allowOutsideClick: true
            });
            return;
        }

        Swal.fire({
            title: "Position Size: " + posSize,
            // type: "warning",
            html:   //"<span style=\"color:red;\"><b>Total Risk:</b> " + cur + numberWithCommas((dollarRisk).toFixed(2)) + " (" + (parseFloat(percentRisk).toFixed(2))  + "%) </span><br>" +
            //"<span style=\"color:blue;\"><b>Potential Gain:</b> " + cur + numberWithCommas((dollarRisk*parseFloat(rr)).toFixed(2)) + " (" + (percentRisk*parseFloat(rr)).toFixed(2) + "%) </span><br>" +
                "<b>Risk-Reward Ratio:</b> " + rr.toFixed(3) + emoji + "<br>" +
                "<b>Notional Value:</b> " + numberWithCommas(notionalValue.toFixed(2)) + "<br>" +
                "<b>Leverage Used:</b> " + (notionalValue/balance).toFixed(2) + "<br>" +
                "<b>Margin Used:</b> " + ((notionalValue/(leverage*balance))*100).toFixed(2) + "%<br><br>" +
                "<b>Comments:</b> " + msg + "<br>" +
                "<hr>" +
                recap +
                entry +
                stopLoss +
                takeProfit,
            icon: icn,
            // showCancelButton: true,
            // cancelButtonColor: '#d33',
            confirmButtonColor: '#f5990f',
            // cancelButtonText: "Close",

            allowOutsideClick: true

            // button: "Done",
        });
        return;
    }

    function calculatePositionSize() {
        var symbol = $("#currency_pair")[0].value;
        var price = document.getElementById("disabled").value;
        console.log(price)
        var cur = $('input[name="group1"]:checked').val();
        var curr = $('input[type=radio][name=group1]:checked').attr('id')

        var usd_conversion_rate = 0;

        var account_balance = document.getElementById("account_balance").value;
        if (account_balance != "") {
            account_balance = account_balance.split(cur)[1].replace(/,/g, '');
        }

        // If currency is Euro

        if (cur == "‚Ç¨")
        {
            $.ajax({
                type: 'GET',
                url: 'https://api.pytraders.com/price/EURUSD',
                async: false,
                success: function (res) {
                    usd_conversion_rate = res[0]["BID"];
                    account_balance = account_balance*usd_conversion_rate;
                    console.log("Updated Balance");
                    console.log(account_balance);
                },
                error: function (err) {
                    console.log(err);
                    document.getElementById("disabled").value = "";
                }
            });
        }

        // If currency is Euro

        if (cur == "¬£")
        {
            $.ajax({
                type: 'GET',
                url: 'https://api.pytraders.com/price/GBPUSD',
                async: false,
                success: function (res) {
                    usd_conversion_rate = res[0]["BID"];
                    account_balance = account_balance*usd_conversion_rate;
                    console.log("Updated Balance");
                    console.log(account_balance);
                },
                error: function (err) {
                    console.log(err);
                    document.getElementById("disabled").value = "";
                }
            });
        }


        if (curr == "aud")
        {
            $.ajax({
                type: 'GET',
                url: 'https://api.pytraders.com/price/AUDUSD',
                async: false,
                success: function (res) {
                    usd_conversion_rate = res[0]["BID"];
                    account_balance = account_balance*usd_conversion_rate;
                    console.log("Updated Balance");
                    console.log(account_balance);
                },
                error: function (err) {
                    console.log(err);
                    document.getElementById("disabled").value = "";
                }
            });
        }

        if (curr == "cad")
        {
            $.ajax({
                type: 'GET',
                url: 'https://api.pytraders.com/price/USDCAD',
                async: false,
                success: function (res) {
                    usd_conversion_rate = res[0]["BID"];
                    account_balance = account_balance/usd_conversion_rate;
                    console.log("Updated Balance");
                    console.log(account_balance);
                },
                error: function (err) {
                    console.log(err);
                    document.getElementById("disabled").value = "";
                }
            });
        }

        if (curr == "zar")
        {
            $.ajax({
                type: 'GET',
                url: 'https://api.pytraders.com/price/USDZAR',
                async: false,
                success: function (res) {
                    usd_conversion_rate = res[0]["BID"];
                    account_balance = account_balance/usd_conversion_rate;
                    console.log("Updated Balance");
                    console.log(account_balance);
                },
                error: function (err) {
                    console.log(err);
                    document.getElementById("disabled").value = "";
                }
            });
        }


        var direction = window.direction;

        var leverage = document.getElementById("leverage").value;
        var risk = document.getElementById("risk").value.split("%")[0];

        var stop_loss = document.getElementById("stop_loss").value;
        var take_profit = document.getElementById("take_profit").value;

        var asset_class = document.getElementById("asset_classes").value;

        // basic checks
        if (account_balance <= 0 || account_balance == "" || typeof account_balance == "undefined" || isNaN(account_balance)) {
            Swal.fire({
                title: "ERROR CALCULATING POSITION SIZE",
                text: "Please enter a non-zero number for account balance.",
                icon: "error",
                button: "Done",
            });
            return
        } else if (leverage == "") {
            Swal.fire({
                title: "ERROR CALCULATING POSITION SIZE",
                text: "Please select a value for account leverage.",
                icon: "error",
                button: "Done",
            });
            return
        } else if (risk < 0 || risk == "" || typeof risk == "undefined" || isNaN(risk)) {
            Swal.fire({
                title: "ERROR CALCULATING POSITION SIZE",
                text: "Please enter a non-zero percent for risk.",
                icon: "error",
                button: "Done",
            });
            return
        } else if (direction == "") {
            Swal.fire({
                title: "ERROR CALCULATING POSITION SIZE",
                text: "Please select a direction for this trade.",
                icon: "error",
                button: "Done",
            });
            return
        } else if (stop_loss < 0 || stop_loss == "" || typeof stop_loss == "undefined" || isNaN(stop_loss)) {
            Swal.fire({
                title: "ERROR CALCULATING POSITION SIZE",
                text: "Please enter a non-zero value for stop loss.",
                icon: "error",
                button: "Done",
            });
            return
        }
        // else if (take_profit < 0 || take_profit == "" || typeof take_profit == "undefined" || isNaN(take_profit)) {
        //         Swal.fire({
        //                 title: "ERROR CALCULATING POSITION SIZE",
        //                 text: "Please enter a non-zero value for take profit.",
        //                 icon: "error",
        //                 button: "Done",
        //         });
        //         return
        // }

        // validity checks
        if (risk > 100) {
            Swal.fire({
                title: "ERROR CALCULATING POSITION SIZE",
                text: "Please enter a percent for risk less than 100.",
                icon: "error",
                button: "Done",
            });
            return
        }

        if (direction == "Long") {

            if (parseFloat(stop_loss) >= parseFloat(price)) {
                Swal.fire({
                    title: "ERROR CALCULATING POSITION SIZE",
                    text: "The selected direction is \"Long,\" so please enter a stop loss that is less than the current price.",
                    icon: "error",
                    button: "Done",
                });
                return
            }
            if (parseFloat(take_profit) != 0){
                if (parseFloat(take_profit) <= parseFloat(price)) {

                    Swal.fire({
                        title: "ERROR CALCULATING POSITION SIZE",
                        text: "The selected direction is \"Long,\" so please enter a take profit that is greater than the current price.",
                        icon: "error",
                        button: "Done",
                    });
                    return
                }
            }
            else {
                document.getElementById("take_profit").value = "";
            }
        } else if (direction == "Short") {
            if (parseFloat(stop_loss) <= parseFloat(price)) {
                Swal.fire({
                    title: "ERROR CALCULATING POSITION SIZE",
                    text: "The selected direction is \"Short,\" so please enter a stop loss that is greater than the current price.",
                    icon: "error",
                    button: "Done",
                });
                return
            }
            if (parseFloat(take_profit) != 0){
                if (parseFloat(take_profit) >= parseFloat(price)) {
                    Swal.fire({
                        title: "ERROR CALCULATING POSITION SIZE",
                        text: "The selected direction is \"Short,\" so please enter a take profit that is less than the current price.",
                        icon: "error",
                        button: "Done",
                    });
                    return
                }
            }
            else {
                document.getElementById("take_profit").value = "";
            }
        }

        if (asset_class == "Forex") {
            if (symbol.slice(0,3) == "USD") {
                // 100/((usd/xxx) +/- % change in asset) * $-to-risk / (100,000)
                var percent_change = Math.abs(price - stop_loss) / price;
                var dollars_at_risk = account_balance * (risk / 100);
                var contract_size = 100000;
                // var position_size = (1 / percent_change * dollars_at_risk / contract_size).toFixed(2);
                var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
                console.log("POSITION SIZE: " + position_size);

                account_balance = document.getElementById("account_balance").value;
                if (account_balance != "") {
                    account_balance = account_balance.split(cur)[1].replace(/,/g, '');
                }
                dollars_at_risk = account_balance * (risk / 100);

                postCalcCheck(
                    position_size,
                    (document.getElementById("take_profit_percent").value),
                    (document.getElementById("stop_loss_percent").value),
                    account_balance,
                    document.getElementById("leverage").value,
                    dollars_at_risk,
                    document.getElementById("risk").value.split("%")[0],
                    contract_size*position_size
                );
            }

            else {
                var base_currency = symbol.slice(0,3);

                if (base_currency == "CAD")
                {
                    base_currency = "USDCAD";
                }
                else if (base_currency == "CHF")
                {
                    base_currency = "USDCHF";
                }
                else
                {
                    base_currency = base_currency + "USD";
                }

                $.ajax({
                    type: 'GET',
                    url: 'https://api.pytraders.com/price/' + base_currency,

                    success: function (res) {
                        var usd_conversion_rate = res[0]["BID"];

                        if (base_currency == "USDCAD" || base_currency == "USDCHF")
                        {
                            usd_conversion_rate = 1/usd_conversion_rate;
                        }

                        console.log(`${usd_conversion_rate} ${price}`)

                        var percent_change = Math.abs(price - stop_loss) / price;
                        var dollars_at_risk = account_balance * (risk / 100);
                        console.log(dollars_at_risk);
                        var contract_size = 100000 * usd_conversion_rate;
                        var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
                        // console.log("TESTER: " + Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100);
                        // console.log("POSITION SIZE: " + position_size);

                        account_balance = document.getElementById("account_balance").value;
                        if (account_balance != "") {
                            account_balance = account_balance.split(cur)[1].replace(/,/g, '');
                        }
                        dollars_at_risk = account_balance * (risk / 100);

                        postCalcCheck(
                            position_size,
                            (document.getElementById("take_profit_percent").value),
                            (document.getElementById("stop_loss_percent").value),
                            account_balance,
                            document.getElementById("leverage").value,
                            dollars_at_risk,
                            document.getElementById("risk").value.split("%")[0],
                            contract_size*position_size
                        );
                    },
                    error: function (err) {
                        console.log(err);
                        document.getElementById("disabled").value = "";
                    }
                });

            }
        } else if (asset_class == "Cryptos") {
            var size = 1;
            if (symbol.slice(0,3) == "BTC") {
                size = 1;
            }
            else if (symbol.slice(0,4) == "DASH") {
                size = 10;
            }
            else if (symbol.slice(0,3) == "EOS") {
                size = 10;
            }
            else if (symbol.slice(0,3) == "ETH") {
                size = 10;
            }
            else if (symbol.slice(0,4) == "IOTA") {
                size = 100;
            }
            else if (symbol.slice(0,3) == "LTC") {
                size = 10;
            }
            else if (symbol.slice(0,3) == "NEO") {
                size = 10;
            }
            else if (symbol.slice(0,3) == "OMG") {
                size = 100;
            }
            else if (symbol.slice(0,3) == "XMR") {
                size = 10;
            }
            else if (symbol.slice(0,3) == "XRP") {
                size = 10000;
            }
            else if (symbol.slice(0,3) == "ZEC") {
                size = 10;
            }
            else if (symbol.slice(0,3) == "BNB") {
                size = 10;
            }
            else if (symbol.slice(0,4) == "DOGE") {
                size = 10000;
            }
            var percent_change = Math.abs(price - stop_loss) / price;
            var dollars_at_risk = account_balance * (risk / 100);
            var contract_size = size * price;
            // var position_size = (1 / percent_change * dollars_at_risk / contract_size).toFixed(2);
            var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
            console.log("POSITION SIZE: " + position_size);
            // Swal.fire({
            //         title: "POSITION SIZE: " + position_size,
            //         text: "Excellent risk management on this position!",
            //         icon: "success",
            //         button: "Done",
            // });

            account_balance = document.getElementById("account_balance").value;
            if (account_balance != "") {
                account_balance = account_balance.split(cur)[1].replace(/,/g, '');
            }
            dollars_at_risk = account_balance * (risk / 100);

            postCalcCheck(
                position_size,
                (document.getElementById("take_profit_percent").value),
                (document.getElementById("stop_loss_percent").value),
                account_balance,
                document.getElementById("leverage").value,
                dollars_at_risk,
                document.getElementById("risk").value.split("%")[0],
                contract_size*position_size
            );

        } else if (asset_class == "Energys") {

            var percent_change = Math.abs(price - stop_loss) / price;
            var dollars_at_risk = account_balance * (risk / 100);
            var contract_size = 1000 * price;
            // var position_size = (1 / percent_change * dollars_at_risk / contract_size).toFixed(2);
            var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
            console.log("POSITION SIZE: " + position_size);
            // Swal.fire({
            //         title: "POSITION SIZE: " + position_size,
            //         text: "Excellent risk management on this position!",
            //         icon: "success",
            //         button: "Done",
            // });
            account_balance = document.getElementById("account_balance").value;
            if (account_balance != "") {
                account_balance = account_balance.split(cur)[1].replace(/,/g, '');
            }
            dollars_at_risk = account_balance * (risk / 100);

            postCalcCheck(
                position_size,
                (document.getElementById("take_profit_percent").value),
                (document.getElementById("stop_loss_percent").value),
                account_balance,
                document.getElementById("leverage").value,
                dollars_at_risk,
                document.getElementById("risk").value.split("%")[0],
                contract_size*position_size
            );

        } else if (asset_class == "EU-Shares") {

            var percent_change = Math.abs(price - stop_loss) / price;
            var dollars_at_risk = account_balance * (risk / 100);
            var contract_size = 100 * price;
            // var position_size = (1 / percent_change * dollars_at_risk / contract_size).toFixed(2);
            var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
            console.log("POSITION SIZE: " + position_size);
            // Swal.fire({
            //         title: "POSITION SIZE: " + position_size,
            //         text: "Excellent risk management on this position!",
            //         icon: "success",
            //         button: "Done",
            // });
            account_balance = document.getElementById("account_balance").value;
            if (account_balance != "") {
                account_balance = account_balance.split(cur)[1].replace(/,/g, '');
            }
            dollars_at_risk = account_balance * (risk / 100);

            postCalcCheck(
                position_size,
                (document.getElementById("take_profit_percent").value),
                (document.getElementById("stop_loss_percent").value),
                account_balance,
                document.getElementById("leverage").value,
                dollars_at_risk,
                document.getElementById("risk").value.split("%")[0],
                contract_size*position_size
            );

        } else if (asset_class == "Indexes") {

            var percent_change = Math.abs(price - stop_loss) / price;
            var dollars_at_risk = account_balance * (risk / 100);
            var contract_size = 100 * price;

            if (symbol == "DOLLAR") {
                contract_size = 1000*price;
            }

            // var position_size = (1 / percent_change * dollars_at_risk / contract_size).toFixed(2);
            var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
            console.log("POSITION SIZE: " + position_size);
            // Swal.fire({
            //         title: "POSITION SIZE: " + position_size,
            //         text: "Excellent risk management on this position!",
            //         icon: "success",
            //         button: "Done",
            // });

            account_balance = document.getElementById("account_balance").value;
            if (account_balance != "") {
                account_balance = account_balance.split(cur)[1].replace(/,/g, '');
            }
            dollars_at_risk = account_balance * (risk / 100);

            postCalcCheck(
                position_size,
                (document.getElementById("take_profit_percent").value),
                (document.getElementById("stop_loss_percent").value),
                account_balance,
                document.getElementById("leverage").value,
                dollars_at_risk,
                document.getElementById("risk").value.split("%")[0],
                contract_size*position_size
            );

        } else if (asset_class == "US-Shares") {

            var percent_change = Math.abs(price - stop_loss) / price;
            var dollars_at_risk = account_balance * (risk / 100);
            var contract_size = 100 * price;
            // var position_size = (1 / percent_change * dollars_at_risk / contract_size).toFixed(2);
            var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
            console.log("POSITION SIZE: " + position_size);
            // Swal.fire({
            //         title: "POSITION SIZE: " + position_size,
            //         text: "Excellent risk management on this position!",
            //         icon: "success",
            //         button: "Done",
            // });

            account_balance = document.getElementById("account_balance").value;
            if (account_balance != "") {
                account_balance = account_balance.split(cur)[1].replace(/,/g, '');
            }
            dollars_at_risk = account_balance * (risk / 100);

            postCalcCheck(
                position_size,
                (document.getElementById("take_profit_percent").value),
                (document.getElementById("stop_loss_percent").value),
                account_balance,
                document.getElementById("leverage").value,
                dollars_at_risk,
                document.getElementById("risk").value.split("%")[0],
                contract_size*position_size
            );

        } else if (asset_class == "Metals") {

            var percent_change = Math.abs(price - stop_loss) / price;
            var dollars_at_risk = account_balance * (risk / 100);
            var contract_size = 100 * price;

            if (symbol == "COPPER") {
                contract_size = 25000*price;
            }

            if (symbol == "XAGUSD") {
                contract_size = 5000*price;
            }

            // var position_size = (1 / percent_change * dollars_at_risk / contract_size).toFixed(2);
            var position_size = Math.floor((1 / percent_change * dollars_at_risk / contract_size)*100)/100;
            console.log("POSITION SIZE: " + position_size);
            // Swal.fire({
            //         title: "POSITION SIZE: " + position_size,
            //         text: "Excellent risk management on this position!",
            //         icon: "success",
            //         button: "Done",
            // });

            account_balance = document.getElementById("account_balance").value;
            if (account_balance != "") {
                account_balance = account_balance.split(cur)[1].replace(/,/g, '');
            }
            dollars_at_risk = account_balance * (risk / 100);

            postCalcCheck(
                position_size,
                (document.getElementById("take_profit_percent").value),
                (document.getElementById("stop_loss_percent").value),
                account_balance,
                document.getElementById("leverage").value,
                dollars_at_risk,
                document.getElementById("risk").value.split("%")[0],
                contract_size*position_size
            );
        }


    }

    $(document).ready(function(){
        $('.sidenav').sidenav();
        $('.modal').modal();
        $.ajax({
            type: 'GET',
            url: 'https://api.pytraders.com/assets/',
            success: function (res) {
                console.log(res);
                for (let index = 0; index < res.length; index++) {
                    const element = res[index];
                    $("#asset_classes")[0].innerHTML += `<option style="color:black" value='${element}'>${element}</option>`;
                }
                $('select').formSelect();

                var imgNum = Math.floor(Math.random() * (44 - 37 + 1)) + 37;

            },
            error: function (err) {
                console.log(err);
                $.ajax({
                    type: 'GET',
                    url: 'https://api.pytraders.com/assets/',
                    success: function (res) {
                        console.log(res);
                        for (let index = 0; index < res.length; index++) {
                            const element = res[index];
                            $("#asset_classes")[0].innerHTML += `<option style="color:black" value='${element}'>${element}</option>`;
                        }
                        $('select').formSelect();
                    },
                    error: function (err) {
                        console.log(err);
                        $.ajax({
                            type: 'GET',
                            url: 'https://api.pytraders.com/assets/',
                            success: function (res) {
                                console.log(res);
                                for (let index = 0; index < res.length; index++) {
                                    const element = res[index];
                                    $("#asset_classes")[0].innerHTML += `<option style="color:black" value='${element}'>${element}</option>`;
                                }
                                $('select').formSelect();
                            },
                            error: function (err) {
                                console.log(err);
                                $.ajax({
                                    type: 'GET',
                                    url: 'https://api.pytraders.com/assets/',
                                    success: function (res) {
                                        console.log(res);
                                        for (let index = 0; index < res.length; index++) {
                                            const element = res[index];
                                            $("#asset_classes")[0].innerHTML += `<option style="color:black" value='${element}'>${element}</option>`;
                                        }
                                        $('select').formSelect();
                                    },
                                    error: function (err) {
                                        console.log(err);
                                    }
                                });
                            }
                        });
                    }
                });
            }
        });
    });
</script>
</body>
</html>